var sn=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Un=sn((Bn,De)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();/*! @license DOMPurify 3.1.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.2/LICENSE */const{entries:Dt,setPrototypeOf:It,isFrozen:cn,getPrototypeOf:un,getOwnPropertyDescriptor:dn}=Object;let{freeze:$,seal:ne,create:Ft}=Object,{apply:ut,construct:dt}=typeof Reflect<"u"&&Reflect;$||($=function(e){return e});ne||(ne=function(e){return e});ut||(ut=function(e,o,i){return e.apply(o,i)});dt||(dt=function(e,o){return new e(...o)});const Ge=ee(Array.prototype.forEach),Lt=ee(Array.prototype.pop),Oe=ee(Array.prototype.push),Ye=ee(String.prototype.toLowerCase),rt=ee(String.prototype.toString),kt=ee(String.prototype.match),Pe=ee(String.prototype.replace),fn=ee(String.prototype.indexOf),pn=ee(String.prototype.trim),ie=ee(Object.prototype.hasOwnProperty),Z=ee(RegExp.prototype.test),Ne=hn(TypeError);function ee(r){return function(e){for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];return ut(r,e,i)}}function hn(r){return function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return dt(r,o)}}function C(r,e){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ye;It&&It(r,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const c=o(s);c!==s&&(cn(e)||(e[i]=c),s=c)}r[s]=!0}return r}function mn(r){for(let e=0;e<r.length;e++)ie(r,e)||(r[e]=null);return r}function be(r){const e=Ft(null);for(const[o,i]of Dt(r))ie(r,o)&&(Array.isArray(i)?e[o]=mn(i):i&&typeof i=="object"&&i.constructor===Object?e[o]=be(i):e[o]=i);return e}function qe(r,e){for(;r!==null;){const i=dn(r,e);if(i){if(i.get)return ee(i.get);if(typeof i.value=="function")return ee(i.value)}r=un(r)}function o(){return null}return o}const Rt=$(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),it=$(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),lt=$(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),gn=$(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),st=$(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yn=$(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xt=$(["#text"]),Ot=$(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ct=$(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pt=$(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$e=$(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bn=ne(/\{\{[\w\W]*|[\w\W]*\}\}/gm),En=ne(/<%[\w\W]*|[\w\W]*%>/gm),Tn=ne(/\${[\w\W]*}/gm),vn=ne(/^data-[\-\w.\u00B7-\uFFFF]/),_n=ne(/^aria-[\-\w]+$/),Ut=ne(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),An=ne(/^(?:\w+script|data):/i),Sn=ne(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zt=ne(/^html$/i),Mn=ne(/^[a-z][.\w]*(-[.\w]+)+$/i);var Nt=Object.freeze({__proto__:null,MUSTACHE_EXPR:bn,ERB_EXPR:En,TMPLIT_EXPR:Tn,DATA_ATTR:vn,ARIA_ATTR:_n,IS_ALLOWED_URI:Ut,IS_SCRIPT_OR_DATA:An,ATTR_WHITESPACE:Sn,DOCTYPE_NAME:zt,CUSTOM_ELEMENT:Mn});const Cn=function(){return typeof window>"u"?null:window},wn=function(e,o){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";o&&o.hasAttribute(s)&&(i=o.getAttribute(s));const c="dompurify"+(i?"#"+i:"");try{return e.createPolicy(c,{createHTML(d){return d},createScriptURL(d){return d}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function Bt(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cn();const e=m=>Bt(m);if(e.version="3.1.2",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;let{document:o}=r;const i=o,s=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:d,Node:g,Element:w,NodeFilter:T,NamedNodeMap:h=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:b,DOMParser:P,trustedTypes:N}=r,F=w.prototype,he=qe(F,"cloneNode"),L=qe(F,"nextSibling"),ae=qe(F,"childNodes"),me=qe(F,"parentNode");if(typeof d=="function"){const m=o.createElement("template");m.content&&m.content.ownerDocument&&(o=m.content.ownerDocument)}let D,ge="";const{implementation:Ae,createNodeIterator:Xe,createDocumentFragment:Ze,getElementsByTagName:Ke}=o,{importNode:Qe}=i;let te={};e.isSupported=typeof Dt=="function"&&typeof me=="function"&&Ae&&Ae.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Se,ERB_EXPR:Me,TMPLIT_EXPR:Ce,DATA_ATTR:Fe,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:Ue,ATTR_WHITESPACE:ze,CUSTOM_ELEMENT:Je}=Nt;let{IS_ALLOWED_URI:Be}=Nt,a=null;const n=C({},[...Rt,...it,...lt,...st,...xt]);let u=null;const E=C({},[...Ot,...ct,...Pt,...$e]);let f=Object.seal(Ft(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),v=null,_=null,y=!0,A=!0,k=!1,R=!0,I=!1,x=!0,O=!1,M=!1,U=!1,z=!1,H=!1,Y=!1,le=!0,K=!1;const et="user-content-";let Ie=!0,ye=!1,ce={},de=null;const Le=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let He=null;const We=C({},["audio","video","img","source","image","track"]);let Ee=null;const ke=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),fe="http://www.w3.org/1998/Math/MathML",Te="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml";let ve=oe,tt=!1,nt=null;const Jt=C({},[fe,Te,oe],rt);let Re=null;const en=["application/xhtml+xml","text/html"],tn="text/html";let B=null,_e=null;const pt=255,nn=o.createElement("form"),ht=function(t){return t instanceof RegExp||t instanceof Function},at=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(_e&&_e===t)){if((!t||typeof t!="object")&&(t={}),t=be(t),Re=en.indexOf(t.PARSER_MEDIA_TYPE)===-1?tn:t.PARSER_MEDIA_TYPE,B=Re==="application/xhtml+xml"?rt:Ye,a=ie(t,"ALLOWED_TAGS")?C({},t.ALLOWED_TAGS,B):n,u=ie(t,"ALLOWED_ATTR")?C({},t.ALLOWED_ATTR,B):E,nt=ie(t,"ALLOWED_NAMESPACES")?C({},t.ALLOWED_NAMESPACES,rt):Jt,Ee=ie(t,"ADD_URI_SAFE_ATTR")?C(be(ke),t.ADD_URI_SAFE_ATTR,B):ke,He=ie(t,"ADD_DATA_URI_TAGS")?C(be(We),t.ADD_DATA_URI_TAGS,B):We,de=ie(t,"FORBID_CONTENTS")?C({},t.FORBID_CONTENTS,B):Le,v=ie(t,"FORBID_TAGS")?C({},t.FORBID_TAGS,B):{},_=ie(t,"FORBID_ATTR")?C({},t.FORBID_ATTR,B):{},ce=ie(t,"USE_PROFILES")?t.USE_PROFILES:!1,y=t.ALLOW_ARIA_ATTR!==!1,A=t.ALLOW_DATA_ATTR!==!1,k=t.ALLOW_UNKNOWN_PROTOCOLS||!1,R=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,I=t.SAFE_FOR_TEMPLATES||!1,x=t.SAFE_FOR_XML!==!1,O=t.WHOLE_DOCUMENT||!1,z=t.RETURN_DOM||!1,H=t.RETURN_DOM_FRAGMENT||!1,Y=t.RETURN_TRUSTED_TYPE||!1,U=t.FORCE_BODY||!1,le=t.SANITIZE_DOM!==!1,K=t.SANITIZE_NAMED_PROPS||!1,Ie=t.KEEP_CONTENT!==!1,ye=t.IN_PLACE||!1,Be=t.ALLOWED_URI_REGEXP||Ut,ve=t.NAMESPACE||oe,f=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ht(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(f.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ht(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(f.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(f.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),I&&(A=!1),H&&(z=!0),ce&&(a=C({},xt),u=[],ce.html===!0&&(C(a,Rt),C(u,Ot)),ce.svg===!0&&(C(a,it),C(u,ct),C(u,$e)),ce.svgFilters===!0&&(C(a,lt),C(u,ct),C(u,$e)),ce.mathMl===!0&&(C(a,st),C(u,Pt),C(u,$e))),t.ADD_TAGS&&(a===n&&(a=be(a)),C(a,t.ADD_TAGS,B)),t.ADD_ATTR&&(u===E&&(u=be(u)),C(u,t.ADD_ATTR,B)),t.ADD_URI_SAFE_ATTR&&C(Ee,t.ADD_URI_SAFE_ATTR,B),t.FORBID_CONTENTS&&(de===Le&&(de=be(de)),C(de,t.FORBID_CONTENTS,B)),Ie&&(a["#text"]=!0),O&&C(a,["html","head","body"]),a.table&&(C(a,["tbody"]),delete v.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ne('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ne('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=t.TRUSTED_TYPES_POLICY,ge=D.createHTML("")}else D===void 0&&(D=wn(N,s)),D!==null&&typeof ge=="string"&&(ge=D.createHTML(""));$&&$(t),_e=t}},mt=C({},["mi","mo","mn","ms","mtext"]),gt=C({},["foreignobject","annotation-xml"]),an=C({},["title","style","font","a","script"]),yt=C({},[...it,...lt,...gn]),bt=C({},[...st,...yn]),on=function(t){let l=me(t);(!l||!l.tagName)&&(l={namespaceURI:ve,tagName:"template"});const p=Ye(t.tagName),S=Ye(l.tagName);return nt[t.namespaceURI]?t.namespaceURI===Te?l.namespaceURI===oe?p==="svg":l.namespaceURI===fe?p==="svg"&&(S==="annotation-xml"||mt[S]):!!yt[p]:t.namespaceURI===fe?l.namespaceURI===oe?p==="math":l.namespaceURI===Te?p==="math"&&gt[S]:!!bt[p]:t.namespaceURI===oe?l.namespaceURI===Te&&!gt[S]||l.namespaceURI===fe&&!mt[S]?!1:!bt[p]&&(an[p]||!yt[p]):!!(Re==="application/xhtml+xml"&&nt[t.namespaceURI]):!1},re=function(t){Oe(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}},ot=function(t,l){try{Oe(e.removed,{attribute:l.getAttributeNode(t),from:l})}catch{Oe(e.removed,{attribute:null,from:l})}if(l.removeAttribute(t),t==="is"&&!u[t])if(z||H)try{re(l)}catch{}else try{l.setAttribute(t,"")}catch{}},Et=function(t){let l=null,p=null;if(U)t="<remove></remove>"+t;else{const G=kt(t,/^[\r\n\t ]+/);p=G&&G[0]}Re==="application/xhtml+xml"&&ve===oe&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const S=D?D.createHTML(t):t;if(ve===oe)try{l=new P().parseFromString(S,Re)}catch{}if(!l||!l.documentElement){l=Ae.createDocument(ve,"template",null);try{l.documentElement.innerHTML=tt?ge:S}catch{}}const W=l.body||l.documentElement;return t&&p&&W.insertBefore(o.createTextNode(p),W.childNodes[0]||null),ve===oe?Ke.call(l,O?"html":"body")[0]:O?l.documentElement:W},Tt=function(t){return Xe.call(t.ownerDocument||t,t,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},rn=function(t){return t instanceof b&&(typeof t.__depth<"u"&&typeof t.__depth!="number"||typeof t.__removalCount<"u"&&typeof t.__removalCount!="number"||typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof h)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},vt=function(t){return typeof g=="function"&&t instanceof g},ue=function(t,l,p){te[t]&&Ge(te[t],S=>{S.call(e,l,p,_e)})},_t=function(t){let l=null;if(ue("beforeSanitizeElements",t,null),rn(t))return re(t),!0;const p=B(t.nodeName);if(ue("uponSanitizeElement",t,{tagName:p,allowedTags:a}),t.hasChildNodes()&&!vt(t.firstElementChild)&&Z(/<[/\w]/g,t.innerHTML)&&Z(/<[/\w]/g,t.textContent)||t.nodeType===7||x&&t.nodeType===8&&Z(/<[/\w]/g,t.data))return re(t),!0;if(!a[p]||v[p]){if(!v[p]&&St(p)&&(f.tagNameCheck instanceof RegExp&&Z(f.tagNameCheck,p)||f.tagNameCheck instanceof Function&&f.tagNameCheck(p)))return!1;if(Ie&&!de[p]){const S=me(t)||t.parentNode,W=ae(t)||t.childNodes;if(W&&S){const G=W.length;for(let j=G-1;j>=0;--j){const V=he(W[j],!0);V.__removalCount=(t.__removalCount||0)+1,S.insertBefore(V,L(t))}}}return re(t),!0}return t instanceof w&&!on(t)||(p==="noscript"||p==="noembed"||p==="noframes")&&Z(/<\/no(script|embed|frames)/i,t.innerHTML)?(re(t),!0):(I&&t.nodeType===3&&(l=t.textContent,Ge([Se,Me,Ce],S=>{l=Pe(l,S," ")}),t.textContent!==l&&(Oe(e.removed,{element:t.cloneNode()}),t.textContent=l)),ue("afterSanitizeElements",t,null),!1)},At=function(t,l,p){if(le&&(l==="id"||l==="name")&&(p in o||p in nn))return!1;if(!(A&&!_[l]&&Z(Fe,l))){if(!(y&&Z(we,l))){if(!u[l]||_[l]){if(!(St(t)&&(f.tagNameCheck instanceof RegExp&&Z(f.tagNameCheck,t)||f.tagNameCheck instanceof Function&&f.tagNameCheck(t))&&(f.attributeNameCheck instanceof RegExp&&Z(f.attributeNameCheck,l)||f.attributeNameCheck instanceof Function&&f.attributeNameCheck(l))||l==="is"&&f.allowCustomizedBuiltInElements&&(f.tagNameCheck instanceof RegExp&&Z(f.tagNameCheck,p)||f.tagNameCheck instanceof Function&&f.tagNameCheck(p))))return!1}else if(!Ee[l]){if(!Z(Be,Pe(p,ze,""))){if(!((l==="src"||l==="xlink:href"||l==="href")&&t!=="script"&&fn(p,"data:")===0&&He[t])){if(!(k&&!Z(Ue,Pe(p,ze,"")))){if(p)return!1}}}}}}return!0},St=function(t){return t!=="annotation-xml"&&kt(t,Je)},Mt=function(t){ue("beforeSanitizeAttributes",t,null);const{attributes:l}=t;if(!l)return;const p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:u};let S=l.length;for(;S--;){const W=l[S],{name:G,namespaceURI:j,value:V}=W,xe=B(G);let X=G==="value"?V:pn(V);if(p.attrName=xe,p.attrValue=X,p.keepAttr=!0,p.forceKeepAttr=void 0,ue("uponSanitizeAttribute",t,p),X=p.attrValue,p.forceKeepAttr||(ot(G,t),!p.keepAttr))continue;if(!R&&Z(/\/>/i,X)){ot(G,t);continue}I&&Ge([Se,Me,Ce],wt=>{X=Pe(X,wt," ")});const Ct=B(t.nodeName);if(At(Ct,xe,X)){if(K&&(xe==="id"||xe==="name")&&(ot(G,t),X=et+X),D&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!j)switch(N.getAttributeType(Ct,xe)){case"TrustedHTML":{X=D.createHTML(X);break}case"TrustedScriptURL":{X=D.createScriptURL(X);break}}try{j?t.setAttributeNS(j,G,X):t.setAttribute(G,X),Lt(e.removed)}catch{}}}ue("afterSanitizeAttributes",t,null)},ln=function m(t){let l=null;const p=Tt(t);for(ue("beforeSanitizeShadowDOM",t,null);l=p.nextNode();){if(ue("uponSanitizeShadowNode",l,null),_t(l))continue;const S=me(l);l.nodeType===1&&(S&&S.__depth?l.__depth=(l.__removalCount||0)+S.__depth+1:l.__depth=1),l.__depth>=pt&&re(l),l.content instanceof c&&(l.content.__depth=l.__depth,m(l.content)),Mt(l)}ue("afterSanitizeShadowDOM",t,null)};return e.sanitize=function(m){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=null,p=null,S=null,W=null;if(tt=!m,tt&&(m="<!-->"),typeof m!="string"&&!vt(m))if(typeof m.toString=="function"){if(m=m.toString(),typeof m!="string")throw Ne("dirty is not a string, aborting")}else throw Ne("toString is not a function");if(!e.isSupported)return m;if(M||at(t),e.removed=[],typeof m=="string"&&(ye=!1),ye){if(m.nodeName){const V=B(m.nodeName);if(!a[V]||v[V])throw Ne("root node is forbidden and cannot be sanitized in-place")}}else if(m instanceof g)l=Et("<!---->"),p=l.ownerDocument.importNode(m,!0),p.nodeType===1&&p.nodeName==="BODY"||p.nodeName==="HTML"?l=p:l.appendChild(p);else{if(!z&&!I&&!O&&m.indexOf("<")===-1)return D&&Y?D.createHTML(m):m;if(l=Et(m),!l)return z?null:Y?ge:""}l&&U&&re(l.firstChild);const G=Tt(ye?m:l);for(;S=G.nextNode();){if(_t(S))continue;const V=me(S);S.nodeType===1&&(V&&V.__depth?S.__depth=(S.__removalCount||0)+V.__depth+1:S.__depth=1),S.__depth>=pt&&re(S),S.content instanceof c&&(S.content.__depth=S.__depth,ln(S.content)),Mt(S)}if(ye)return m;if(z){if(H)for(W=Ze.call(l.ownerDocument);l.firstChild;)W.appendChild(l.firstChild);else W=l;return(u.shadowroot||u.shadowrootmode)&&(W=Qe.call(i,W,!0)),W}let j=O?l.outerHTML:l.innerHTML;return O&&a["!doctype"]&&l.ownerDocument&&l.ownerDocument.doctype&&l.ownerDocument.doctype.name&&Z(zt,l.ownerDocument.doctype.name)&&(j="<!DOCTYPE "+l.ownerDocument.doctype.name+`>
`+j),I&&Ge([Se,Me,Ce],V=>{j=Pe(j,V," ")}),D&&Y?D.createHTML(j):j},e.setConfig=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};at(m),M=!0},e.clearConfig=function(){_e=null,M=!1},e.isValidAttribute=function(m,t,l){_e||at({});const p=B(m),S=B(t);return At(p,S,l)},e.addHook=function(m,t){typeof t=="function"&&(te[m]=te[m]||[],Oe(te[m],t))},e.removeHook=function(m){if(te[m])return Lt(te[m])},e.removeHooks=function(m){te[m]&&(te[m]=[])},e.removeAllHooks=function(){te={}},e}var Ht=Bt();const In=`
<div class="game-menu">
    <div class="menu-title">Battleship</div>
    <p id="press-key">Press any key to continue</p>
    <button id="mobile-button" >Continue</button>
    <footer><a href="https://www.pexels.com/photo/starry-sky-998641/">Photo by Francesco Ungaro</a></footer>
</div>
`,Ln=Ht.sanitize(In),J=()=>({gameMenu:document.querySelector(".game-menu"),pressKey:document.querySelector("#press-key"),mobileButton:document.querySelector("#mobile-button"),difficulty:document.querySelector("#difficulty"),gameSetup:document.querySelector(".game-setup"),gridContainer:document.querySelector(".grid-container"),gameInfoContainer:document.querySelector(".game-info-container"),gameInfo:document.querySelector("#game-info"),playerGrid:document.querySelector(".player-grid"),playerInfo:document.querySelector("#player-info"),cpuInfo:document.querySelector("#cpu-info"),computerGrid:document.querySelector(".computer-grid"),ships:document.querySelector(".ships"),ship:document.querySelectorAll(".ship"),buttons:document.querySelector(".buttons"),menuItem:document.querySelector(".menu-item"),rotate:document.querySelector("#rotate"),start:document.querySelector("#start"),randomize:document.querySelector("#randomize"),restart:document.querySelector("#restart"),backToMenu:document.querySelector("#back-to-menu")}),kn=`
<div class="game-setup">
    <p id="mobile-ship-info">To place ships on mobile, simply click the cell you want the ship to start at, the ships will be placed from biggest to smallest.</p>
    <div class="ships">
        <div><p>Ships:</p></div>
        <div id="ship1" class="ship" data-length="5" draggable="true" title="When selecting a ship, grab it by the green border and place it on the cell you want the ship to start at."></div>
        <div id="ship2" class="ship" data-length="4" draggable="true" title="When selecting a ship, grab it by the green border and place it on the cell you want the ship to start at."></div>
        <div id="ship3" class="ship" data-length="3" draggable="true" title="When selecting a ship, grab it by the green border and place it on the cell you want the ship to start at."></div>
        <div id="ship4" class="ship" data-length="3" draggable="true" title="When selecting a ship, grab it by the green border and place it on the cell you want the ship to start at."></div>
        <div id="ship5" class="ship" data-length="2" draggable="true" title="When selecting a ship, grab it by the green border and place it on the cell you want the ship to start at."></div> 
    </div>
    <div class="grid-container">
     <div>
        <p id="player-tag">Player</p>
        <p id="player-info"></p>
        <div class="player-grid">
            
        </div>
     </div>
     <div class="game-info-container">
        <p id="game-info"></p> 
    </div>
     <div>
     <p id="cpu-tag">CPU</p>
     <p id="cpu-info"></p>
        <div class="computer-grid">
            
        </div> 
    </div>
    </div>
    <div class="menu-item">
        <label for="difficulty">Difficulty:</label>
        <select id="difficulty" name="difficulty">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
        </select>
    </div>
    <div class="buttons">
        <button id="rotate">Rotate</button>
        <button id="start">Start Game</button>
        <button id="randomize" title="Press Q on the keyboard to place ships randomly.">Randomize</button>
        <button id="restart" title="Press C on the keyboard to restart the setup page.">Restart</button>
        <button id="back-to-menu" title="Press Escape on the keyboard to go back to intro screen.">Back</div> 
    </div>
</div>
`,Wt=Ht.sanitize(kn);function je(r){for(let e=0;e<100;e++){let o=document.createElement("div");o.classList.add("cell"),o.setAttribute("data-index",e),r.playerGrid.appendChild(o)}for(let e=0;e<100;e++){let o=document.createElement("div");o.classList.add("cpu-cell"),o.setAttribute("data-index",e),o.title="If you get really mad at the CPU, you can cheat in the console. 😉",r.computerGrid.appendChild(o)}}class ft{constructor(){this.board=Array.from({length:10},()=>Array(10).fill(null)),this.ships=[]}placeShip(e,o,i){const s=e.length;let[c,d]=o;for(let g=0;g<s;g++)if(i==="horizontal"){if(d+g>=10)throw new Error("Ship placement out of bounds.");if(this.board[c][d+g]!==null)throw new Error("Position already occupied.");this.board[c][d+g]=e}else if(i==="vertical"){if(c+g>=10)throw new Error("Ship placement out of bounds.");if(this.board[c+g][d]!==null)throw new Error("Position already occupied.");this.board[c+g][d]=e}this.ships.push({ship:e,startPosition:o,direction:i})}receiveAttack(e){let[o,i]=e,s=this.board[o][i];if(!(s==="hit"||s==="miss")){if(s===null)return this.board[o][i]="miss",!1;if(s&&s.type==="ship"){let c=this.ships.find(g=>g.ship===s),d;return c.direction==="horizontal"?d=i-c.startPosition[1]:d=o-c.startPosition[0],s.hit(d),this.board[o][i]="hit",s.isSunk()?"sunk":!0}else return!1}}allSunk(){return this.ships.every(e=>e.ship.isSunk())}resetBoard(){this.board=Array.from({length:10},()=>Array(10).fill(null)),this.ships=[]}}class se{constructor(e){this.length=e,this.hits=Array(e).fill(!1),this.type="ship"}hit(e){e>=0&&e<this.length&&(this.hits[e]=!0)}isSunk(){return!!this.hits.every(e=>e===!0)}}function Gt(r){r.dataTransfer.setData("text/plain",r.target.id)}function qt(r){r.preventDefault()}const q=new ft;function $t(r){r.preventDefault();let e=J();const o=r.dataTransfer.getData("text/plain"),i=document.getElementById(o),s=parseInt(i.getAttribute("data-length"),10),c=!i.classList.contains("rotate"),d=parseInt(r.target.getAttribute("data-index"),10),g=10,w=Math.floor(d/g),T=d%g;if(c)if(T+s<=g){const h=new se(s);q.placeShip(h,[w,T],"horizontal"),console.log("player:",q.board),i.style.display="none";for(let b=0;b<s;b++)document.querySelector(`.cell[data-index="${d+b}"]`).classList.add("occupied")}else e.gameInfo.textContent="Ship placement out of bounds.",e.gameInfo.style.display="block",setTimeout(function(){e.gameInfo.textContent="",e.gameInfo.style.display="none"},3e3);else if(w+s<=g){const h=new se(s);q.placeShip(h,[w,T],"vertical"),console.log("player:",q.board),i.style.display="none";for(let b=0;b<s;b++)document.querySelector(`.cell[data-index="${d+b*g}"]`).classList.add("occupied")}else e.gameInfo.textContent="Ship placement out of bounds.",e.gameInfo.style.display="block",setTimeout(function(){e.gameInfo.textContent="",e.gameInfo.style.display="none"},3e3)}function Yt(r){let e=J();e.ship.forEach(o=>{const s=parseInt(o.getAttribute("data-length"),10);o.classList.toggle("rotate"),o.classList.contains("rotate")?(e.ships.style.flexDirection="row",o.style.width="25px",o.style.height=`${25*s}px`,o.style.borderTop="7px solid green",o.style.borderLeft="none"):(e.ships.style.flexDirection="column",o.style.width=`${25*s}px`,o.style.height="25px",o.style.borderLeft="7px solid green",o.style.borderTop="none")})}class jt{constructor(){this.board=new ft,this.board.ships=[{ship:new se(5),startPosition:[0,0],direction:"horizontal"},{ship:new se(4),startPosition:[0,1],direction:"horizontal"},{ship:new se(3),startPosition:[0,2],direction:"horizontal"},{ship:new se(3),startPosition:[0,3],direction:"horizontal"},{ship:new se(2),startPosition:[0,4],direction:"horizontal"}],this.attackedCells=new Set,this.lastHit=null,this.missStreak=0}placeShips(){for(let e=0;e<this.board.ships.length;e++){let o,i,s;for(;;){s=Math.random()<.5?"horizontal":"vertical",s==="horizontal"?(o=Math.floor(Math.random()*10),i=Math.floor(Math.random()*(10-this.board.ships[e].ship.length))):(o=Math.floor(Math.random()*(10-this.board.ships[e].ship.length)),i=Math.floor(Math.random()*10));let c=!0;for(let d=0;d<this.board.ships[e].ship.length;d++)if(s==="horizontal"){if(this.board.board[o][i+d]!==null){c=!1;break}}else if(this.board.board[o+d][i]!==null){c=!1;break}if(c){this.board.ships[e].startPosition=[o,i],this.board.ships[e].direction=s;break}}for(let c=0;c<this.board.ships[e].ship.length;c++)s==="horizontal"?this.board.board[o][i+c]=this.board.ships[e].ship:this.board.board[o+c][i]=this.board.ships[e].ship}}easyAttack(e){let o,i,s,c=J();for(;;){o=Math.floor(Math.random()*10),i=Math.floor(Math.random()*10);let d=`${o},${i}`;if(!this.attackedCells.has(d)){if(this.attackedCells.add(d),s=e.receiveAttack([o,i]),s!==void 0)break;s==="sunk"&&(c.playerInfo.textContent="CPU sank your ship!",c.playerInfo.style.display="block",setTimeout(function(){c.playerInfo.textContent="",c.playerInfo.style.display="none"},3e3))}}return[o,i,s]}mediumAttack(e){let o,i,s,c=J(),d=[];for(let h=0;h<10;h++)for(let b=0;b<10;b++)this.attackedCells.has(`${h},${b}`)||d.push([h,b]);let g=Math.random(),w=d.filter(([h,b])=>e.board[h][b]!==null),T=d.filter(([h,b])=>e.board[h][b]===null);if(g<.3&&w.length>0){let h=Math.floor(Math.random()*w.length);[o,i]=w[h]}else if(T.length>0){let h=Math.floor(Math.random()*T.length);[o,i]=T[h]}else return null;return s=e.receiveAttack([o,i]),this.attackedCells.add(`${o},${i}`),s==="sunk"&&(c.playerInfo.textContent="CPU sank your ship!",c.playerInfo.style.display="block",setTimeout(function(){c.playerInfo.textContent="",c.playerInfo.style.display="none"},3e3)),[o,i,s]}hardAttack(e){let o,i,s,c=J(),d=[];for(let h=0;h<10;h++)for(let b=0;b<10;b++)this.attackedCells.has(`${h},${b}`)||d.push([h,b]);let g=Math.random(),w=d.filter(([h,b])=>e.board[h][b]!==null),T=d.filter(([h,b])=>e.board[h][b]===null);if(g<.6&&w.length>0){let h=Math.floor(Math.random()*w.length);[o,i]=w[h]}else if(T.length>0){let h=Math.floor(Math.random()*T.length);[o,i]=T[h]}else return null;return s=e.receiveAttack([o,i]),this.attackedCells.add(`${o},${i}`),s==="sunk"&&(c.playerInfo.textContent="CPU sank your ship!",c.playerInfo.style.display="block",setTimeout(function(){c.playerInfo.textContent="",c.playerInfo.style.display="none"},3e3)),[o,i,s]}}var De={};(function r(e,o,i,s){var c=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",g=function(){if(!e.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),n=a.getContext("2d");n.fillRect(0,0,1,1);var u=a.transferToImageBitmap();try{n.createPattern(u,"no-repeat")}catch{return!1}return!0}();function w(){}function T(a){var n=o.exports.Promise,u=n!==void 0?n:e.Promise;return typeof u=="function"?new u(a):(a(w,w),null)}var h=function(a,n){return{transform:function(u){if(a)return u;if(n.has(u))return n.get(u);var E=new OffscreenCanvas(u.width,u.height),f=E.getContext("2d");return f.drawImage(u,0,0),n.set(u,E),E},clear:function(){n.clear()}}}(g,new Map),b=function(){var a=Math.floor(16.666666666666668),n,u,E={},f=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(v){var _=Math.random();return E[_]=requestAnimationFrame(function y(A){f===A||f+a-1<A?(f=A,delete E[_],v()):E[_]=requestAnimationFrame(y)}),_},u=function(v){E[v]&&cancelAnimationFrame(E[v])}):(n=function(v){return setTimeout(v,a)},u=function(v){return clearTimeout(v)}),{frame:n,cancel:u}}(),P=function(){var a,n,u={};function E(f){function v(_,y){f.postMessage({options:_||{},callback:y})}f.init=function(y){var A=y.transferControlToOffscreen();f.postMessage({canvas:A},[A])},f.fire=function(y,A,k){if(n)return v(y,null),n;var R=Math.random().toString(36).slice(2);return n=T(function(I){function x(O){O.data.callback===R&&(delete u[R],f.removeEventListener("message",x),n=null,h.clear(),k(),I())}f.addEventListener("message",x),v(y,R),u[R]=x.bind(null,{data:{callback:R}})}),n},f.reset=function(){f.postMessage({reset:!0});for(var y in u)u[y](),delete u[y]}}return function(){if(a)return a;if(!i&&c){var f=["var CONFETTI, SIZE = {}, module = {};","("+r.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([f])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",v),null}E(a)}return a}}(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function F(a,n){return n?n(a):a}function he(a){return a!=null}function L(a,n,u){return F(a&&he(a[n])?a[n]:N[n],u)}function ae(a){return a<0?0:Math.floor(a)}function me(a,n){return Math.floor(Math.random()*(n-a))+a}function D(a){return parseInt(a,16)}function ge(a){return a.map(Ae)}function Ae(a){var n=String(a).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:D(n.substring(0,2)),g:D(n.substring(2,4)),b:D(n.substring(4,6))}}function Xe(a){var n=L(a,"origin",Object);return n.x=L(n,"x",Number),n.y=L(n,"y",Number),n}function Ze(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function Ke(a){var n=a.getBoundingClientRect();a.width=n.width,a.height=n.height}function Qe(a){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=a,n}function te(a,n,u,E,f,v,_,y,A){a.save(),a.translate(n,u),a.rotate(v),a.scale(E,f),a.arc(0,0,1,_,y,A),a.restore()}function Se(a){var n=a.angle*(Math.PI/180),u=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-n+(.5*u-Math.random()*u),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function Me(a,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var u=n.tick++/n.totalTicks,E=n.x+n.random*n.tiltCos,f=n.y+n.random*n.tiltSin,v=n.wobbleX+n.random*n.tiltCos,_=n.wobbleY+n.random*n.tiltSin;if(a.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-u)+")",a.beginPath(),d&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))a.fill(ze(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(v-E)*.1,Math.abs(_-f)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var y=Math.PI/10*n.wobble,A=Math.abs(v-E)*.1,k=Math.abs(_-f)*.1,R=n.shape.bitmap.width*n.scalar,I=n.shape.bitmap.height*n.scalar,x=new DOMMatrix([Math.cos(y)*A,Math.sin(y)*A,-Math.sin(y)*k,Math.cos(y)*k,n.x,n.y]);x.multiplySelf(new DOMMatrix(n.shape.matrix));var O=a.createPattern(h.transform(n.shape.bitmap),"no-repeat");O.setTransform(x),a.globalAlpha=1-u,a.fillStyle=O,a.fillRect(n.x-R/2,n.y-I/2,R,I),a.globalAlpha=1}else if(n.shape==="circle")a.ellipse?a.ellipse(n.x,n.y,Math.abs(v-E)*n.ovalScalar,Math.abs(_-f)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):te(a,n.x,n.y,Math.abs(v-E)*n.ovalScalar,Math.abs(_-f)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var M=Math.PI/2*3,U=4*n.scalar,z=8*n.scalar,H=n.x,Y=n.y,le=5,K=Math.PI/le;le--;)H=n.x+Math.cos(M)*z,Y=n.y+Math.sin(M)*z,a.lineTo(H,Y),M+=K,H=n.x+Math.cos(M)*U,Y=n.y+Math.sin(M)*U,a.lineTo(H,Y),M+=K;else a.moveTo(Math.floor(n.x),Math.floor(n.y)),a.lineTo(Math.floor(n.wobbleX),Math.floor(f)),a.lineTo(Math.floor(v),Math.floor(_)),a.lineTo(Math.floor(E),Math.floor(n.wobbleY));return a.closePath(),a.fill(),n.tick<n.totalTicks}function Ce(a,n,u,E,f){var v=n.slice(),_=a.getContext("2d"),y,A,k=T(function(R){function I(){y=A=null,_.clearRect(0,0,E.width,E.height),h.clear(),f(),R()}function x(){i&&!(E.width===s.width&&E.height===s.height)&&(E.width=a.width=s.width,E.height=a.height=s.height),!E.width&&!E.height&&(u(a),E.width=a.width,E.height=a.height),_.clearRect(0,0,E.width,E.height),v=v.filter(function(O){return Me(_,O)}),v.length?y=b.frame(x):I()}y=b.frame(x),A=I});return{addFettis:function(R){return v=v.concat(R),k},canvas:a,promise:k,reset:function(){y&&b.cancel(y),A&&A()}}}function Fe(a,n){var u=!a,E=!!L(n||{},"resize"),f=!1,v=L(n,"disableForReducedMotion",Boolean),_=c&&!!L(n||{},"useWorker"),y=_?P():null,A=u?Ze:Ke,k=a&&y?!!a.__confetti_initialized:!1,R=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,I;function x(M,U,z){for(var H=L(M,"particleCount",ae),Y=L(M,"angle",Number),le=L(M,"spread",Number),K=L(M,"startVelocity",Number),et=L(M,"decay",Number),Ie=L(M,"gravity",Number),ye=L(M,"drift",Number),ce=L(M,"colors",ge),de=L(M,"ticks",Number),Le=L(M,"shapes"),He=L(M,"scalar"),We=!!L(M,"flat"),Ee=Xe(M),ke=H,fe=[],Te=a.width*Ee.x,oe=a.height*Ee.y;ke--;)fe.push(Se({x:Te,y:oe,angle:Y,spread:le,startVelocity:K,color:ce[ke%ce.length],shape:Le[me(0,Le.length)],ticks:de,decay:et,gravity:Ie,drift:ye,scalar:He,flat:We}));return I?I.addFettis(fe):(I=Ce(a,fe,A,U,z),I.promise)}function O(M){var U=v||L(M,"disableForReducedMotion",Boolean),z=L(M,"zIndex",Number);if(U&&R)return T(function(K){K()});u&&I?a=I.canvas:u&&!a&&(a=Qe(z),document.body.appendChild(a)),E&&!k&&A(a);var H={width:a.width,height:a.height};y&&!k&&y.init(a),k=!0,y&&(a.__confetti_initialized=!0);function Y(){if(y){var K={getBoundingClientRect:function(){if(!u)return a.getBoundingClientRect()}};A(K),y.postMessage({resize:{width:K.width,height:K.height}});return}H.width=H.height=null}function le(){I=null,E&&(f=!1,e.removeEventListener("resize",Y)),u&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,k=!1)}return E&&!f&&(f=!0,e.addEventListener("resize",Y,!1)),y?y.fire(M,H,le):x(M,H,le)}return O.reset=function(){y&&y.reset(),I&&I.reset()},O}var we;function Ue(){return we||(we=Fe(null,{useWorker:!0,resize:!0})),we}function ze(a,n,u,E,f,v,_){var y=new Path2D(a),A=new Path2D;A.addPath(y,new DOMMatrix(n));var k=new Path2D;return k.addPath(A,new DOMMatrix([Math.cos(_)*f,Math.sin(_)*f,-Math.sin(_)*v,Math.cos(_)*v,u,E])),k}function Je(a){if(!d)throw new Error("path confetti are not supported in this browser");var n,u;typeof a=="string"?n=a:(n=a.path,u=a.matrix);var E=new Path2D(n),f=document.createElement("canvas"),v=f.getContext("2d");if(!u){for(var _=1e3,y=_,A=_,k=0,R=0,I,x,O=0;O<_;O+=2)for(var M=0;M<_;M+=2)v.isPointInPath(E,O,M,"nonzero")&&(y=Math.min(y,O),A=Math.min(A,M),k=Math.max(k,O),R=Math.max(R,M));I=k-y,x=R-A;var U=10,z=Math.min(U/I,U/x);u=[z,0,0,z,-Math.round(I/2+y)*z,-Math.round(x/2+A)*z]}return{type:"path",path:n,matrix:u}}function Be(a){var n,u=1,E="#000000",f='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?n=a:(n=a.text,u="scalar"in a?a.scalar:u,f="fontFamily"in a?a.fontFamily:f,E="color"in a?a.color:E);var v=10*u,_=""+v+"px "+f,y=new OffscreenCanvas(v,v),A=y.getContext("2d");A.font=_;var k=A.measureText(n),R=Math.ceil(k.actualBoundingBoxRight+k.actualBoundingBoxLeft),I=Math.ceil(k.actualBoundingBoxAscent+k.actualBoundingBoxDescent),x=2,O=k.actualBoundingBoxLeft+x,M=k.actualBoundingBoxAscent+x;R+=x+x,I+=x+x,y=new OffscreenCanvas(R,I),A=y.getContext("2d"),A.font=_,A.fillStyle=E,A.fillText(n,O,M);var U=1/u;return{type:"bitmap",bitmap:y.transferToImageBitmap(),matrix:[U,0,0,U,-R*U/2,-I*U/2]}}o.exports=function(){return Ue().apply(this,arguments)},o.exports.reset=function(){Ue().reset()},o.exports.create=Fe,o.exports.shapeFromPath=Je,o.exports.shapeFromText=Be})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),De,!1);const Vt=De.exports;De.exports.create;function Rn(){let r=J(),e=document.querySelector("#difficulty").value;if(q.ships.length<5){r.gameInfo.textContent="Please place all ships.";return}r.gameInfo.textContent="",console.log(e),r.menuItem.style.display="none",r.rotate.style.display="none",r.start.style.display="none",r.randomize.style.display="none",r.backToMenu.style.display="none",r.restart.style.marginLeft="25px";let o=new jt,i=document.querySelectorAll(".cpu-cell"),s=!0;console.log("cpu:",o.board.board),o.placeShips(),i.forEach(c=>{c.addEventListener("click",function d(g){if(!s)return;console.clear(),console.log("player:",q.board),console.log("cpu:",o.board.board);let w=parseInt(g.target.getAttribute("data-index")),T=Math.floor(w/10),h=w%10,b=o.board.receiveAttack([T,h]);if(b?g.target.classList.add("hit"):g.target.classList.add("miss"),b==="sunk"&&(r.cpuInfo.textContent="You sank a ship!",r.cpuInfo.style.display="block",setTimeout(function(){r.cpuInfo.textContent="",r.cpuInfo.style.display="none"},3e3)),o.board.allSunk()){r.cpuInfo.textContent="You win! 🎉🥳",Vt({particleCount:300,spread:200,origin:{y:.6}}),s=!1,i.forEach(ae=>{ae.removeEventListener("click",d)});return}let P,N,F;console.log(e),e==="easy"?[P,N,F]=o.easyAttack(q):e==="medium"?[P,N,F]=o.mediumAttack(q):e==="hard"&&([P,N,F]=o.hardAttack(q));let he=P*10+N,L=document.querySelector(`.cell[data-index="${he}"]`);if(F){L.classList.remove("occupied"),L.classList.add("hit");return}else L.classList.add("miss");if(q.allSunk()){r.playerInfo.textContent="You lose! 😞🙁",s=!1,i.forEach(ae=>{ae.removeEventListener("click",d)});return}g.target.removeEventListener("click",d)})})}function Xt(){const r=[5,4,3,3,2],e=10;let o=Array(e).fill().map(()=>Array(e).fill(!1));document.querySelectorAll(".cell").forEach(i=>{i.classList.remove("occupied")}),q.resetBoard(),o=Array(e).fill().map(()=>Array(e).fill(!1)),r.forEach(i=>{let s=!1;for(;!s;){const c=Math.random()<.5?"horizontal":"vertical",d=Math.floor(Math.random()*e),g=Math.floor(Math.random()*e);let w=!0;for(let T=0;T<i;T++){let h=c==="horizontal"?d:d+T,b=c==="horizontal"?g+T:g;if(h>=e||b>=e||o[h][b]){w=!1;break}}if(w){const T=new se(i);q.placeShip(T,[d,g],c),s=!0;for(let h=0;h<i;h++){let b=c==="horizontal"?d:d+h,P=c==="horizontal"?g+h:g;o[b][P]=!0;let N=b*e+P;document.querySelector(`.cell[data-index="${N}"]`).classList.add("occupied")}}}}),document.querySelectorAll(".ship").forEach(i=>{i.style.display="none"})}function Zt(){let r=J();q.resetBoard(),r.playerGrid.innerHTML="",r.computerGrid.innerHTML="",je(r),r.menuItem.style.display="block",r.rotate.style.display="block",r.start.style.display="block",r.randomize.style.display="block",r.backToMenu.style.display="block",r.gameInfo.textContent="",r.ship.forEach(o=>{o.style.display="block"}),r.ship.forEach(o=>{o.addEventListener("dragstart",Gt)}),document.querySelectorAll(".cell").forEach(o=>{o.addEventListener("dragover",qt),o.addEventListener("drop",$t)}),console.clear()}function xn(r){r.key==="Escape"&&(Ve(),q.resetBoard()),r.key==="q"&&Xt(),r.key==="c"&&Zt()}const Q=new ft,pe={value:0};function Kt(r){let e=J();if(pe.value>=e.ship.length)return;let o=new se(parseInt(e.ship[pe.value].getAttribute("data-length"),10)),i=o.length,s=!e.ship[pe.value].classList.contains("rotate"),c=parseInt(r.target.getAttribute("data-index"),10),d=10,g=Math.floor(c/d),w=c%d;if(s)if(w+i<=d){Q.placeShip(o,[g,w],"horizontal"),console.log("player:",Q.board),e.ship[pe.value].style.display="none";for(let T=0;T<i;T++)document.querySelector(`.cell[data-index="${c+T}"]`).classList.add("occupied");pe.value++}else e.gameInfo.textContent="Ship placement out of bounds.",e.gameInfo.style.display="block",setTimeout(function(){e.gameInfo.textContent="",e.gameInfo.style.display="none"},3e3);else if(g+i<=d){Q.placeShip(o,[g,w],"vertical"),console.log("player:",Q.board),e.ship[pe.value].style.display="none";for(let T=0;T<i;T++)document.querySelector(`.cell[data-index="${c+T*d}"]`).classList.add("occupied");pe.value++}else e.gameInfo.textContent="Ship placement out of bounds.",e.gameInfo.style.display="block",setTimeout(function(){e.gameInfo.textContent="",e.gameInfo.style.display="none"},3e3)}function On(){const r=[5,4,3,3,2],e=10;let o=Array(e).fill().map(()=>Array(e).fill(!1));document.querySelectorAll(".cell").forEach(i=>{i.classList.remove("occupied")}),Q.resetBoard(),o=Array(e).fill().map(()=>Array(e).fill(!1)),r.forEach(i=>{let s=!1;for(;!s;){const c=Math.random()<.5?"horizontal":"vertical",d=Math.floor(Math.random()*e),g=Math.floor(Math.random()*e);let w=!0;for(let T=0;T<i;T++){let h=c==="horizontal"?d:d+T,b=c==="horizontal"?g+T:g;if(h>=e||b>=e||o[h][b]){w=!1;break}}if(w){const T=new se(i);Q.placeShip(T,[d,g],c),s=!0;for(let h=0;h<i;h++){let b=c==="horizontal"?d:d+h,P=c==="horizontal"?g+h:g;o[b][P]=!0;let N=b*e+P;document.querySelector(`.cell[data-index="${N}"]`).classList.add("occupied")}}}}),document.querySelectorAll(".ship").forEach(i=>{i.style.display="none"})}function Pn(){let r=J(),e=document.querySelector("#difficulty").value;if(Q.ships.length<5){r.gameInfo.textContent="Please place all ships.";return}r.gameInfo.textContent="",console.log(e),r.menuItem.style.display="none",r.rotate.style.display="none",r.start.style.display="none",r.randomize.style.display="none",r.backToMenu.style.display="none",r.restart.style.marginLeft="25px";let o=new jt,i=document.querySelectorAll(".cpu-cell"),s=!0;console.log("cpu:",o.board.board),o.placeShips(),i.forEach(c=>{c.addEventListener("click",function d(g){if(!s)return;console.clear(),console.log("player:",Q.board),console.log("cpu:",o.board.board);let w=parseInt(g.target.getAttribute("data-index")),T=Math.floor(w/10),h=w%10,b=o.board.receiveAttack([T,h]);if(b?g.target.classList.add("hit"):g.target.classList.add("miss"),b==="sunk"&&(r.cpuInfo.textContent="You sank a ship!",r.cpuInfo.style.display="block",setTimeout(function(){r.cpuInfo.textContent="",r.cpuInfo.style.display="none"},3e3)),o.board.allSunk()){r.gameInfo.textContent="You win! 🎉🥳",Vt({particleCount:300,spread:200,origin:{y:.6}}),s=!1,i.forEach(ae=>{ae.removeEventListener("click",d)});return}let P,N,F;console.log(e),e==="easy"?[P,N,F]=o.easyAttack(Q):e==="medium"?[P,N,F]=o.mediumAttack(Q):e==="hard"&&([P,N,F]=o.hardAttack(Q));let he=P*10+N,L=document.querySelector(`.cell[data-index="${he}"]`);if(F){L.classList.remove("occupied"),L.classList.add("hit");return}else L.classList.add("miss");if(Q.allSunk()){r.gameInfo.textContent="You lose! 😞🙁",s=!1,i.forEach(ae=>{ae.removeEventListener("click",d)});return}g.target.removeEventListener("click",d)})})}function Nn(){let r=J();Q.resetBoard(),r.playerGrid.innerHTML="",r.computerGrid.innerHTML="",je(r),r.menuItem.style.display="block",r.rotate.style.display="block",r.start.style.display="block",r.randomize.style.display="block",r.backToMenu.style.display="block",r.gameInfo.textContent="",r.ship.forEach(o=>{o.style.display="block"});let e=document.querySelectorAll(".cell");pe.value=0,e.forEach(o=>{o.addEventListener("click",Kt)}),console.clear()}function Dn(){const r=document.getElementById("app");r.innerHTML=Wt;let e=J();je(e),document.querySelectorAll(".cell").forEach(i=>{i.addEventListener("click",Kt)}),e.rotate.addEventListener("click",Yt),e.randomize.addEventListener("click",On),e.restart.addEventListener("click",Nn),e.backToMenu.addEventListener("click",()=>{Ve(),q.resetBoard()}),e.start.addEventListener("click",Pn)}const Qt=document.getElementById("app");function Ve(){Qt.innerHTML=Ln;let r=J();window.addEventListener("keydown",Fn),r.mobileButton&&r.mobileButton.addEventListener("click",Dn)}function Fn(){Qt.innerHTML=Wt;let r=J();je(r);let e=document.querySelectorAll(".cell");r.rotate.addEventListener("click",Yt),r.ship.forEach(o=>{o.addEventListener("dragstart",Gt)}),e.forEach(o=>{o.addEventListener("dragover",qt),o.addEventListener("drop",$t)}),r.randomize.addEventListener("click",Xt),r.restart.addEventListener("click",Zt),r.backToMenu.addEventListener("click",()=>{Ve(),q.resetBoard()}),window.addEventListener("keydown",xn),r.start.addEventListener("click",Rn)}Ve()});export default Un();
